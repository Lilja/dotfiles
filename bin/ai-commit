#!/bin/bash

# List staged files
added_files=$(git diff --cached --name-only)
if [ -z "$added_files" ]; then
  echo "âš ï¸ No changes to commit. Aborting."
  exit 1
fi

echo "ğŸ“„ Files staged for commit:"
echo "$added_files"
#
# Generate commit message using Gemini
commit_msg=$(git diff --cached | gemini --model gemini-2.5-flash "Generate a concise commit message:")

# Check if commit message is empty
if [ -z "$commit_msg" ]; then
  echo "âŒ Commit message is empty. Aborting commit."
  exit 1
fi

# Commit with the generated message
git commit -m "$commit_msg"

